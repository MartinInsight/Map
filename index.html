<!DOCTYPE html>
<html>
<head>
    <title>US Transportation Congestion Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="styles/main.css"/>
</head>
<body>
    <div id="tab-container" class="transport-tab-container">
      <button class="transport-tab truck-tab active" data-map="truck">Truck</button>
      <button class="transport-tab rail-tab" data-map="rail">Rail</button>
    </div>
    
    <div id="map-container">
      <div id="truck-map" class="transport-map active"></div>
      <div id="rail-map" class="transport-map"></div>
    </div>
    
    <div id="truck-map" class="map-container active" style="height:100vh; width:100vw;"></div>
    <div id="rail-map" class="map-container" style="height:100vh; width:100vw;"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/truck_map.js"></script>
    <script src="js/rail_map.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 지도 초기화 지연 (CSS 로딩 완료 후)
            setTimeout(() => {
                const truckMap = new TruckCongestionMap('truck-map');
                const railMap = new RailCongestionMap('rail-map');
                
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', () => {
                        document.querySelectorAll('.tab-button').forEach(btn => 
                            btn.classList.remove('active'));
                        button.classList.add('active');
                        
                        document.querySelectorAll('.map-container').forEach(container => 
                            container.classList.remove('active'));
                        document.getElementById(`${button.dataset.tab}-map`).classList.add('active');
                        
                        setTimeout(() => {
                            if(button.dataset.tab === 'truck') {
                                truckMap.map.invalidateSize();
                            } else {
                                railMap.map.invalidateSize();
                            }
                        }, 100);
                    });
                });
            }, 100);
        });
    </script>
</body>
</html>
