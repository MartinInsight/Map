<!DOCTYPE html>
<html>
<head>
    <title>US Transportation Congestion Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="styles/main.css"/>
</head>
<body>
    <div class="tab-container">
        <button class="tab-button active" data-tab="trucking">TRUCKING CONGESTION</button>
        <button class="tab-button" data-tab="rail">RAIL CONGESTION</button>
    </div>
    
    <div id="trucking-map" class="map-container active" style="height:100vh; width:100vw;"></div>
    <div id="rail-map" class="map-container" style="height:100vh; width:100vw;"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/truck_map.js"></script>
    <script src="js/rail_map.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 지도 초기화 지연 (CSS 로딩 완료 후)
            setTimeout(() => {
                const truckingMap = new TruckCongestionMap('trucking-map');
                const railMap = new RailCongestionMap('rail-map');
                
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', () => {
                        document.querySelectorAll('.tab-button').forEach(btn => 
                            btn.classList.remove('active'));
                        button.classList.add('active');
                        
                        document.querySelectorAll('.map-container').forEach(container => 
                            container.classList.remove('active'));
                        document.getElementById(`${button.dataset.tab}-map`).classList.add('active');
                        
                        setTimeout(() => {
                            if(button.dataset.tab === 'trucking') {
                                truckingMap.map.invalidateSize();
                            } else {
                                railMap.map.invalidateSize();
                            }
                        }, 100);
                    });
                });
            }, 100);
        });
    </script>
</body>
</html>
